<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Code Orchestrator Dashboard</title>
    <style>
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        /* Header */
        .header {
            background: #2c3e50;
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.2em;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        /* Mode Switcher */
        .mode-switcher {
            position: absolute;
            top: 30px;
            right: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .mode-toggle {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .mode-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #34495e;
            transition: .4s;
            border-radius: 30px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #e74c3c;
        }

        input:checked + .slider:before {
            transform: translateX(30px);
        }

        .mode-label {
            font-size: 14px;
            font-weight: 500;
        }

        /* Main Content */
        .main-content {
            padding: 40px;
        }

        /* Status Overview */
        .status-overview {
            background: #ecf0f1;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .current-task {
            font-size: 1.3em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .task-description {
            color: #7f8c8d;
            font-size: 1.1em;
            line-height: 1.5;
        }

        /* Workflow Timeline */
        .workflow-section {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 1.8em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 25px;
            text-align: center;
        }

        .workflow-timeline {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f9fa;
            padding: 30px;
            border-radius: 12px;
            overflow-x: auto;
            min-height: 120px;
        }

        .workflow-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 140px;
            position: relative;
            flex-shrink: 0;
        }

        .step-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .step-icon.pending {
            background: #ecf0f1;
            color: #95a5a6;
            border: 3px solid #bdc3c7;
        }

        .step-icon.in-progress {
            background: #3498db;
            color: white;
            border: 3px solid #2980b9;
            animation: pulse 2s infinite;
        }

        .step-icon.completed {
            background: #27ae60;
            color: white;
            border: 3px solid #229954;
        }

        .step-icon.gate {
            background: #f39c12;
            color: white;
            border: 3px solid #e67e22;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .step-label {
            font-size: 0.9em;
            font-weight: 600;
            text-align: center;
            color: #2c3e50;
            max-width: 120px;
            line-height: 1.3;
        }

        .workflow-connector {
            flex: 1;
            height: 4px;
            background: #bdc3c7;
            margin: 0 15px;
            position: relative;
            top: -30px;
        }

        .workflow-connector.active {
            background: #3498db;
        }

        .workflow-connector.completed {
            background: #27ae60;
        }

        /* Agent Details */
        .agents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .agent-card {
            background: white;
            border: 2px solid #ecf0f1;
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .agent-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .agent-card.active {
            border-color: #3498db;
            background: #f8fbff;
        }

        .agent-card.completed {
            border-color: #27ae60;
            background: #f8fff9;
        }

        .agent-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .agent-name {
            font-size: 1.3em;
            font-weight: 600;
            color: #2c3e50;
        }

        .agent-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
            text-transform: uppercase;
        }

        .agent-status.pending {
            background: #ecf0f1;
            color: #7f8c8d;
        }

        .agent-status.in-progress {
            background: #3498db;
            color: white;
        }

        .agent-status.completed {
            background: #27ae60;
            color: white;
        }

        .agent-description {
            color: #7f8c8d;
            line-height: 1.5;
            font-size: 0.95em;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid #ecf0f1;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
            transform: translateY(-2px);
        }

        .last-updated {
            text-align: center;
            color: #7f8c8d;
            font-size: 0.9em;
            margin-top: 20px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header {
                padding: 20px;
            }

            .mode-switcher {
                position: static;
                margin-top: 15px;
            }

            .main-content {
                padding: 20px;
            }

            .workflow-timeline {
                padding: 20px;
                flex-direction: column;
                gap: 20px;
            }

            .workflow-connector {
                display: none;
            }

            .agents-grid {
                grid-template-columns: 1fr;
            }

            .controls {
                flex-direction: column;
                align-items: center;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8em;
            }

            .section-title {
                font-size: 1.5em;
            }

            .step-icon {
                width: 50px;
                height: 50px;
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="mode-switcher">
                <span class="mode-label">Regular</span>
                <label class="mode-toggle">
                    <input type="checkbox" id="modeToggle">
                    <span class="slider"></span>
                </label>
                <span class="mode-label">Meta</span>
            </div>
            <h1>Claude Code Orchestrator</h1>
            <p>Workflow Progress Dashboard</p>
        </header>

        <main class="main-content">
            <div class="status-overview">
                <div class="current-task">Current Task</div>
                <div class="task-description" id="currentTask">
                    Create dashboard HTML interface implementing the visual workflow progress design
                </div>
            </div>

            <section class="workflow-section">
                <h2 class="section-title">Workflow Progress</h2>
                <div class="workflow-timeline" id="workflowTimeline">
                    <!-- Workflow steps will be dynamically generated -->
                </div>
            </section>

            <section class="workflow-section">
                <h2 class="section-title">Agent Details</h2>
                <div class="agents-grid" id="agentsGrid">
                    <!-- Agent cards will be dynamically generated -->
                </div>
            </section>

            <div class="controls">
                <button class="btn btn-primary" onclick="refreshStatus()">Refresh Status</button>
                <button class="btn btn-secondary" onclick="simulateProgress()">Simulate Progress</button>
            </div>

            <div class="last-updated" id="lastUpdated">
                Last updated: <span id="updateTime"></span>
            </div>
        </main>
    </div>

    <script>
        // Mock data structures matching .agent-outputs/ file formats
        const mockStatusData = {
            regular: {
                currentTask: "Create dashboard HTML interface implementing the visual workflow progress design",
                workflow: [
                    { name: "Explorer", status: "completed", type: "agent", icon: "🔍" },
                    { name: "Criteria Gate", status: "completed", type: "gate", icon: "🚪" },
                    { name: "Planner", status: "completed", type: "agent", icon: "📋" },
                    { name: "Coder", status: "in-progress", type: "agent", icon: "💻" },
                    { name: "Scribe", status: "pending", type: "agent", icon: "📝" },
                    { name: "Verifier", status: "pending", type: "agent", icon: "✅" },
                    { name: "Completion Gate", status: "pending", type: "gate", icon: "🏁" }
                ],
                agents: [
                    {
                        name: "Explorer",
                        status: "completed",
                        description: "Analyzed task requirements and identified patterns, dependencies, and constraints for the dashboard implementation."
                    },
                    {
                        name: "Planner",
                        status: "completed",
                        description: "Created detailed implementation plan with step-by-step approach and success criteria."
                    },
                    {
                        name: "Coder",
                        status: "in-progress",
                        description: "Currently implementing the dashboard HTML interface with embedded CSS and JavaScript."
                    },
                    {
                        name: "Scribe",
                        status: "pending",
                        description: "Will document the implementation and create usage instructions."
                    },
                    {
                        name: "Verifier",
                        status: "pending",
                        description: "Will test the dashboard functionality and verify all success criteria are met."
                    }
                ]
            },
            meta: {
                currentTask: "Meta-mode: Create dashboard HTML interface implementing the visual workflow progress design",
                workflow: [
                    { name: "Explorer", status: "completed", type: "agent", icon: "🔍" },
                    { name: "Criteria Gate", status: "completed", type: "gate", icon: "🚪" },
                    { name: "Planner", status: "completed", type: "agent", icon: "📋" },
                    { name: "Coder", status: "in-progress", type: "agent", icon: "💻" },
                    { name: "Scribe", status: "pending", type: "agent", icon: "📝" },
                    { name: "Verifier", status: "pending", type: "agent", icon: "✅" },
                    { name: "Completion Gate", status: "pending", type: "gate", icon: "🏁" }
                ],
                agents: [
                    {
                        name: "Explorer",
                        status: "completed",
                        description: "Analyzed task requirements and identified patterns, dependencies, and constraints for the dashboard implementation in meta mode."
                    },
                    {
                        name: "Planner",
                        status: "completed",
                        description: "Created detailed implementation plan with step-by-step approach and success criteria in meta mode."
                    },
                    {
                        name: "Coder",
                        status: "in-progress",
                        description: "Currently implementing the dashboard HTML interface with embedded CSS and JavaScript in meta mode."
                    },
                    {
                        name: "Scribe",
                        status: "pending",
                        description: "Will document the implementation and create usage instructions in meta mode."
                    },
                    {
                        name: "Verifier",
                        status: "pending",
                        description: "Will test the dashboard functionality and verify all success criteria are met in meta mode."
                    }
                ]
            }
        };

        let currentMode = 'regular';
        let simulationStep = 0;

        // Initialize dashboard
        function initDashboard() {
            renderWorkflowTimeline();
            renderAgentsGrid();
            updateCurrentTask();
            updateLastUpdated();
        }

        // Mode switching
        document.getElementById('modeToggle').addEventListener('change', function() {
            currentMode = this.checked ? 'meta' : 'regular';
            initDashboard();
        });

        // Render workflow timeline
        function renderWorkflowTimeline() {
            const timeline = document.getElementById('workflowTimeline');
            const workflow = mockStatusData[currentMode].workflow;
            
            timeline.innerHTML = '';
            
            workflow.forEach((step, index) => {
                // Create step element
                const stepDiv = document.createElement('div');
                stepDiv.className = 'workflow-step';
                
                const iconDiv = document.createElement('div');
                iconDiv.className = `step-icon ${step.status}${step.type === 'gate' ? ' gate' : ''}`;
                iconDiv.textContent = step.icon;
                
                const labelDiv = document.createElement('div');
                labelDiv.className = 'step-label';
                labelDiv.textContent = step.name;
                
                stepDiv.appendChild(iconDiv);
                stepDiv.appendChild(labelDiv);
                timeline.appendChild(stepDiv);
                
                // Add connector (except for last item)
                if (index < workflow.length - 1) {
                    const connector = document.createElement('div');
                    connector.className = `workflow-connector ${getConnectorStatus(workflow, index)}`;
                    timeline.appendChild(connector);
                }
            });
        }

        // Get connector status based on adjacent steps
        function getConnectorStatus(workflow, index) {
            const currentStep = workflow[index];
            const nextStep = workflow[index + 1];
            
            if (currentStep.status === 'completed') {
                return 'completed';
            } else if (currentStep.status === 'in-progress') {
                return 'active';
            }
            return '';
        }

        // Render agents grid
        function renderAgentsGrid() {
            const grid = document.getElementById('agentsGrid');
            const agents = mockStatusData[currentMode].agents;
            
            grid.innerHTML = '';
            
            agents.forEach(agent => {
                const card = document.createElement('div');
                card.className = `agent-card ${agent.status}`;
                
                card.innerHTML = `
                    <div class="agent-header">
                        <div class="agent-name">${agent.name}</div>
                        <div class="agent-status ${agent.status}">${agent.status.replace('-', ' ')}</div>
                    </div>
                    <div class="agent-description">${agent.description}</div>
                `;
                
                grid.appendChild(card);
            });
        }

        // Update current task display
        function updateCurrentTask() {
            document.getElementById('currentTask').textContent = mockStatusData[currentMode].currentTask;
        }

        // Update last updated time
        function updateLastUpdated() {
            const now = new Date();
            document.getElementById('updateTime').textContent = now.toLocaleTimeString();
        }

        // Refresh status (simulated)
        function refreshStatus() {
            updateLastUpdated();
            // In a real implementation, this would read from actual .agent-outputs/ files
            console.log(`Refreshing status from .agent-outputs${currentMode === 'meta' ? '-meta' : ''}/`);
        }

        // Simulate progress for demonstration
        function simulateProgress() {
            const workflow = mockStatusData[currentMode].workflow;
            const agents = mockStatusData[currentMode].agents;
            
            // Find first non-completed item and advance it
            for (let i = 0; i < workflow.length; i++) {
                if (workflow[i].status === 'pending') {
                    workflow[i].status = 'in-progress';
                    break;
                } else if (workflow[i].status === 'in-progress') {
                    workflow[i].status = 'completed';
                    // Start next item if it exists and is an agent
                    if (i + 1 < workflow.length && workflow[i + 1].type === 'agent') {
                        workflow[i + 1].status = 'in-progress';
                    }
                    break;
                }
            }
            
            // Update corresponding agent status
            for (let agent of agents) {
                const workflowItem = workflow.find(w => w.name === agent.name);
                if (workflowItem) {
                    agent.status = workflowItem.status;
                }
            }
            
            initDashboard();
        }

        // Auto-refresh simulation (every 30 seconds)
        setInterval(() => {
            refreshStatus();
        }, 30000);

        // Initialize dashboard on page load
        window.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>